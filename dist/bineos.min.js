class Bineos{constructor(e,t){this.containerId=e,this.containerHostname=t||(this.scriptHostname.match(/^cdn\.dl\./)?this.scriptHostname.substring(4):"ad-srv.net"),this.ntmName="_bineos"+this.generateUid(),this.className="_bineos"+this.generateUid(),this.dataLayer={},this.extVar={},this.getParameter={},this.callback={},this.onPreparePlacement=[],this.onLoadPlacement=[],this.onCompileTemplate=[],this.onOutputTemplate=[],this.placementFunctions=this.placementFunctions||{};for(var[a,r]of new URL(window.location.href).searchParams.entries())this.getParameter[a]=r;window[this.className]=this}on(e,t){e="on"+e.charAt(0).toUpperCase()+e.substring(1);if(!this[e])return console.error('BINEOS: Hook "'+e+'" does not exist');this[e].push(t)}generateUid(){return Math.random().toString(16).slice(2)}loadPlacementDependencies(e){const t=[];return e.css&&e.css.forEach(e=>t.push(this.loadCSS(e))),e.js&&e.js.forEach(e=>t.push(this.loadJS(e))),Promise.all(t)}loadPlacement(a,e={}){const r=new Bineos.Placement(this);return r.extVar=e,new Promise((e,t)=>{r.on("compileTemplate",e),r.load(a)})}loadPlacements(e={}){const r=this.loadPlacementDependencies(e);document.querySelectorAll("bineos-zone[uid]").forEach(e=>{var t=e.getAttribute("uid");const a=new Bineos.Placement(this);a.target=e,a.dependenciesLoaded=r,a.load(t)})}channelTracker(e,t={}){const a=new URL("https://tm."+this.containerHostname+"/tm/a/channel/tracker/"+e);for(var[r,i]of Object.entries(t))a.searchParams.set(r,i);fetch(a,{mode:"no-cors",cache:"no-cache"})}articleScore(e){this.channelTracker(this.asConfigChannelTrackerId,e)}loadCSS(e){const a=document.createElement("link");return a.rel="stylesheet",a.href=e,new Promise((e,t)=>{a.addEventListener("load",e),document.head.appendChild(a)})}loadJS(e){const a=document.createElement("script");return a.type="text/javascript",a.src=e,new Promise((e,t)=>{a.addEventListener("load",e),document.head.appendChild(a)})}set(e){for(var[t,a]of Object.entries(e))this.dataLayer[t]=a;return this}send(){Object.assign(this.dataLayer,this.getParameter,{className:this.className}),Object.assign(this.extVar,this.getParameter),window[this.ntmName]=[this.dataLayer,{event:"ntmInit",t:(new Date).getTime()}];const e=new URL("https://tm."+this.containerHostname),t=(e.pathname="/tm/a/container/init/"+this.containerId+".js",e.searchParams.set("ntmData",this.ntmName),e.searchParams.set("rnd",Math.floor(1e8*Math.random())),document.createElement("script"));t.src=e.toString(),document.head.appendChild(t)}}(e=>{Bineos.prototype.scriptHostname=e})(new URL(document.currentScript.src).hostname),Bineos.Request=class{constructor(e){this.url=new URL("https://"+e+"/request.php")}get zone(){return this.url.searchParams.get("zone")}set zone(e){this.url.searchParams.set("zone",e)}appendExtVar(e,t){this.url.searchParams.append("extVar[]",e+":"+t)}appendExtVars(e){for(var[t,a]of Object.entries(e))this.appendExtVar(t,a)}appendExtData(e,t){this.url.searchParams.append("extData[]",e+":"+value)}loadScript(){const a=document.createElement("script");return a.src=this.url.toString(),new Promise((e,t)=>{a.addEventListener("load",e),document.head.appendChild(a)})}loadText(){return new Promise((t,e)=>{fetch(this.url.toString()).then(e=>e.text()).then(e=>t(e))})}},Bineos.Placement=class{constructor(e){this.bineosClass=e,this.data={},this.extVar={},this.onPreparePlacement=[],this.onLoadPlacement=[],this.onCompileTemplate=[],this.onOutputTemplate=[],this.callbackId=e.generateUid(),this.bineosClass.callback[this.callbackId]=this.callback.bind(this)}on(e,t){e="on"+e.charAt(0).toUpperCase()+e.substring(1);if(!this[e])return console.error('BINEOS: Hook "'+e+'" does not exist');this[e].push(t)}hookParser(e){if(!e)return[];const t=document.createElement("div"),a=[],r=(t.innerHTML="<bineos-parser "+e+"></bineos-parser>",t.querySelector("bineos-parser"));for(let e=0;e<r.attributes.length;e++)try{a.push({name:r.attributes[e].name,args:r.attributes[e].value?r.attributes[e].value.split(","):[]})}catch(e){console.error(e)}return a}hook(e){this.bineosClass[e].forEach(e=>e.apply(null,[this])),this[e].forEach(e=>e.apply(null,[this])),this.hookParser(this.data[e]).forEach(e=>{try{e.args.unshift(this),this.bineosClass.placementFunctions[e.name].apply(null,e.args)}catch(e){console.error(e)}})}loadTemplate(a){return a?{src:a,data:new Promise((t,e)=>{fetch(a).then(e=>e.text()).then(e=>t(e))})}:{src:a}}async callback(e){if(Object.assign(this.data,e),await this.dependenciesLoaded,this.hook("onLoadPlacement"),this.templateSrc!==this.externalTemplate.src&&(this.externalTemplate=this.loadTemplate(this.templateSrc)),this.externalTemplate.src&&(this.data.html=await this.externalTemplate.data),!this.templateId||(e=document.querySelector("#"+this.templateId+'[type="text/bineos-template"]'))&&(this.data.html=e.text),this.templateTag&&(this.data.html=this.templateTag.text),this.template=this.bineosClass.template.compile(this.data.html),this.container=document.createElement("div"),this.container.innerHTML=this.template(this.data),this.hook("onCompileTemplate"),this.target){for(;this.container.firstChild;)this.replace?this.target.parentNode.insertBefore(this.container.firstChild,this.target):this.target.appendChild(this.container.firstChild);this.replace&&(this.target.parentNode.removeChild(this.target),delete this.target),this.hook("onOutputTemplate")}delete this.container}load(e){var t="ad."+this.bineosClass.containerHostname;const a=new Bineos.Request(t);a.zone=e,Object.assign(this.extVar,this.bineosClass.extVar),this.target&&[...this.target.attributes].forEach(e=>{const t=e.name.split("-");"extvar"===t[0]&&1<t.length&&(this.extVar[t.slice(1).join("-")]=e.nodeValue)}),this.target&&(this.templateSrc=this.target.getAttribute("template-src"),this.templateId=this.target.getAttribute("template-id"),this.templateTag=this.target.querySelector('script[type="text/bineos-template"]'),this.replace=this.target.getAttribute("replace")),this.extVar.callback=this.bineosClass.className+".callback['"+this.callbackId+"']",this.hook("onPreparePlacement"),this.externalTemplate=this.loadTemplate(this.templateSrc),a.appendExtVars(this.extVar),a.loadScript()}},
/**
 * Template7 1.4.1
 * Mobile-first HTML template engine
 *
 * http://www.idangero.us/template7/
 *
 * Copyright 2019, Vladimir Kharlampidi
 * The iDangero.us
 * http://www.idangero.us/
 *
 * Licensed under MIT
 *
 * Released on: February 5, 2019
 */
Bineos.prototype.template=(()=>{"use strict";var t7ctx,t7ctx="undefined"!=typeof window?window:"undefined"!=typeof global?global:void 0,Template7Context=t7ctx,Template7Utils={quoteSingleRexExp:new RegExp("'","g"),quoteDoubleRexExp:new RegExp('"',"g"),isFunction:function(e){return"function"==typeof e},escape:function(e){return(e=void 0===e?"":e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")},helperToSlices:function(e){for(var t,a,r=Template7Utils.quoteDoubleRexExp,i=Template7Utils.quoteSingleRexExp,s=e.replace(/[{}#}]/g,"").trim().split(" "),n=[],l=0;l<s.length;l+=1){var o=s[l],c=void 0,p=void 0;if(0===l)n.push(o);else if(0===o.indexOf('"')||0===o.indexOf("'"))if(c=0===o.indexOf('"')?r:i,p=0===o.indexOf('"')?'"':"'",2===o.match(c).length)n.push(o);else{for(t=0,a=l+1;a<s.length;a+=1)if(o+=" "+s[a],0<=s[a].indexOf(p)){t=a,n.push(o);break}t&&(l=t)}else if(0<o.indexOf("=")){var h=o.split("="),u=h[0],m=h[1];if(c||(c=0===m.indexOf('"')?r:i,p=0===m.indexOf('"')?'"':"'"),2!==m.match(c).length){for(t=0,a=l+1;a<s.length;a+=1)if(m+=" "+s[a],0<=s[a].indexOf(p)){t=a;break}t&&(l=t)}h=[u,m.replace(c,"")];n.push(h)}else n.push(o)}return n},stringToBlocks:function(e){var t=[];if(!e)return[];for(var a=e.split(/({{[^{^}]*}})/),r=0;r<a.length;r+=1){var i=a[r];if(""!==i)if(i.indexOf("{{")<0)t.push({type:"plain",content:i});else if(!(0<=i.indexOf("{/")))if((i=i.replace(/{{([#/])*([ ])*/,"{{$1").replace(/([ ])*}}/,"}}")).indexOf("{#")<0&&i.indexOf(" ")<0&&i.indexOf("else")<0)t.push({type:"variable",contextName:i.replace(/[{}]/g,"")});else{var s=Template7Utils.helperToSlices(i),n=s[0],l=">"===n,o=[],c={};for(b=1;b<s.length;b+=1){var p=s[b];Array.isArray(p)?c[p[0]]="false"!==p[1]&&p[1]:o.push(p)}if(0<=i.indexOf("{#")){for(var h="",u="",m=0,d=void 0,f=!1,g=!1,x=0,b=r+1;b<a.length;b+=1)if(0<=a[b].indexOf("{{#")&&(x+=1),0<=a[b].indexOf("{{/")&&--x,0<=a[b].indexOf("{{#"+n))h+=a[b],g&&(u+=a[b]),m+=1;else if(0<=a[b].indexOf("{{/"+n)){if(!(0<m)){d=b,f=!0;break}--m,h+=a[b],g&&(u+=a[b])}else 0<=a[b].indexOf("else")&&0===x?g=!0:(g||(h+=a[b]),g&&(u+=a[b]));f&&(d&&(r=d),"raw"===n?t.push({type:"plain",content:h}):t.push({type:"helper",helperName:n,contextName:o,content:h,inverseContent:u,hash:c}))}else 0<i.indexOf(" ")&&(l&&(n="_partial",o[0]&&(0===o[0].indexOf("[")?o[0]=o[0].replace(/[[\]]/g,""):o[0]='"'+o[0].replace(/"|'/g,"")+'"')),t.push({type:"helper",helperName:n,contextName:o,hash:c}))}}return t},parseJsVariable:function(e,r,i){return e.split(/([+ \-*/^()&=|<>!%:?])/g).reduce(function(e,t){var a;return t&&(t.indexOf(r)<0?e.push(t):i?(a=i,0<=t.indexOf(r+".")&&t.split(r+".")[1].split(".").forEach(function(e){a=e in a?a[e]:void 0}),void 0===(a="string"==typeof a||Array.isArray(a)||a.constructor&&a.constructor===Object?JSON.stringify(a):a)&&(a="undefined"),e.push(a)):e.push(JSON.stringify(""))),e},[]).join("")},parseJsParents:function(e,i){return e.split(/([+ \-*^()&=|<>!%:?])/g).reduce(function(e,t){var a,r;return t&&(t.indexOf("../")<0?e.push(t):i&&0!==i.length?(a=t.split("../").length-1,r=a>i.length?i[i.length-1]:i[a-1],t.replace(/..\//g,"").split(".").forEach(function(e){r=void 0!==r[e]?r[e]:"undefined"}),!1!==r&&!0!==r&&(null===r||"undefined"===r)?e.push(JSON.stringify("")):e.push(JSON.stringify(r))):e.push(JSON.stringify(""))),e},[]).join("")},getCompileVar:function(e,t,a){void 0===a&&(a="data_1");for(var r,i=t,s=0,n=0===e.indexOf("../")?(s=e.split("../").length-1,i="ctx_"+(1<=(r=i.split("_")[1]-s)?r:1),e.split("../")[s].split(".")):0===e.indexOf("@global")?(i="Template7.global",e.split("@global.")[1].split(".")):0===e.indexOf("@root")?(i="root",e.split("@root.")[1].split(".")):e.split("."),l=0;l<n.length;l+=1){var o,c=n[l];0===c.indexOf("@")?(o=a.split("_")[1],0<s&&(o=r),0<l?i+="[(data_"+o+" && data_"+o+"."+c.replace("@","")+")]":i="(data_"+o+" && data_"+o+"."+c.replace("@","")+")"):(Number.isFinite?Number:Template7Context).isFinite(c)?i+="["+c+"]":"this"===c||0<=c.indexOf("this.")||0<=c.indexOf("this[")||0<=c.indexOf("this(")?i=c.replace("this",t):i+="."+c}return i},getCompiledArguments:function(e,t,a){for(var r=[],i=0;i<e.length;i+=1)/^['"]/.test(e[i])||/^(true|false|\d+)$/.test(e[i])?r.push(e[i]):r.push(Template7Utils.getCompileVar(e[i],t,a));return r.join(", ")}},Template7Helpers={_partial:function(e,t){var a=this,e=Template7Class.partials[e];return e&&e.template?(e.compiled||(e.compiled=new Template7Class(e.template).compile()),Object.keys(t.hash).forEach(function(e){a[e]=t.hash[e]}),e.compiled(a,t.data,t.root)):""},escape:function(e){if(null==e)return"";if("string"!=typeof e)throw new Error('Template7: Passed context to "escape" helper should be a string');return Template7Utils.escape(e)},if:function(e,t){return(e=Template7Utils.isFunction(e)?e.call(this):e)?t.fn(this,t.data):t.inverse(this,t.data)},unless:function(e,t){return(e=Template7Utils.isFunction(e)?e.call(this):e)?t.inverse(this,t.data):t.fn(this,t.data)},each:function(e,t){var a=e,r="",i=0;if(Template7Utils.isFunction(a)&&(a=a.call(this)),Array.isArray(a)){for(t.hash.reverse&&(a=a.reverse()),i=0;i<a.length;i+=1)r+=t.fn(a[i],{first:0===i,last:i===a.length-1,index:i});t.hash.reverse&&(a=a.reverse())}else for(var s in a)i+=1,r+=t.fn(a[s],{key:s});return 0<i?r:t.inverse(this)},with:function(e,t){var a=e;return Template7Utils.isFunction(a)&&(a=e.call(this)),t.fn(a)},join:function(e,t){return(e=Template7Utils.isFunction(e)?e.call(this):e).join(t.hash.delimiter||t.hash.delimeter)},js:function js(expression,options){var data=options.data,func,execute=expression;return"index first last key".split(" ").forEach(function(e){var t,a;void 0!==data[e]&&(t=new RegExp("this.@"+e,"g"),a=new RegExp("@"+e,"g"),execute=execute.replace(t,JSON.stringify(data[e])).replace(a,JSON.stringify(data[e])))}),options.root&&0<=execute.indexOf("@root")&&(execute=Template7Utils.parseJsVariable(execute,"@root",options.root)),0<=execute.indexOf("@global")&&(execute=Template7Utils.parseJsVariable(execute,"@global",Template7Context.Template7.global)),0<=execute.indexOf("../")&&(execute=Template7Utils.parseJsParents(execute,options.parents)),func=0<=execute.indexOf("return")?"(function(){"+execute+"})":"(function(){return ("+execute+")})",eval(func).call(this)},js_if:function js_if(expression,options){var data=options.data,func,execute=expression,condition=("index first last key".split(" ").forEach(function(e){var t,a;void 0!==data[e]&&(t=new RegExp("this.@"+e,"g"),a=new RegExp("@"+e,"g"),execute=execute.replace(t,JSON.stringify(data[e])).replace(a,JSON.stringify(data[e])))}),options.root&&0<=execute.indexOf("@root")&&(execute=Template7Utils.parseJsVariable(execute,"@root",options.root)),0<=execute.indexOf("@global")&&(execute=Template7Utils.parseJsVariable(execute,"@global",Template7Context.Template7.global)),0<=execute.indexOf("../")&&(execute=Template7Utils.parseJsParents(execute,options.parents)),func=0<=execute.indexOf("return")?"(function(){"+execute+"})":"(function(){return ("+execute+")})",eval(func).call(this));return condition?options.fn(this,options.data):options.inverse(this,options.data)}},Template7Options=(Template7Helpers.js_compare=Template7Helpers.js_if,{}),Template7Partials={},Template7Class=function(e){this.template=e},staticAccessors={options:{configurable:!0},partials:{configurable:!0},helpers:{configurable:!0}};function Template7(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var a=e[0],r=e[1];return 2===e.length?new Template7Class(a).compile()(r):new Template7Class(a)}return Template7Class.prototype.compile=function compile(template,depth){void 0===template&&(template=this.template),void 0===depth&&(depth=1);var t=this;if(t.compiled)return t.compiled;if("string"!=typeof template)throw new Error("Template7: Template must be a string");var stringToBlocks=Template7Utils.stringToBlocks,getCompileVar=Template7Utils.getCompileVar,getCompiledArguments=Template7Utils.getCompiledArguments,blocks=stringToBlocks(template),ctx="ctx_"+depth,data="data_"+depth;if(0===blocks.length)return function(){return""};function getCompileFn(e,a){return e.content?t.compile(e.content,a):function(){return""}}function getCompileInverse(e,a){return e.inverseContent?t.compile(e.inverseContent,a):function(){return""}}var resultString="",i;for(resultString+=1===depth?"(function ("+ctx+", "+data+", root) {\n":"(function ("+ctx+", "+data+") {\n",1===depth&&(resultString+="function isArray(arr){return Array.isArray(arr);}\n",resultString+="function isFunction(func){return (typeof func === 'function');}\n",resultString+='function c(val, ctx) {if (typeof val !== "undefined" && val !== null) {if (isFunction(val)) {return val.call(ctx);} else return val;} else return "";}\n',resultString+="root = root || ctx_1 || {};\n"),resultString+="var r = '';\n",i=0;i<blocks.length;i+=1){var block=blocks[i];if("plain"===block.type)resultString+="r +='"+block.content.replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/'/g,"\\'")+"';";else{var variable=void 0,compiledArguments=void 0;if("variable"===block.type&&(variable=getCompileVar(block.contextName,ctx,data),resultString+="r += c("+variable+", "+ctx+");"),"helper"===block.type){var parents=void 0;if("ctx_1"!==ctx){for(var level=ctx.split("_")[1],parentsString="ctx_"+(level-1),j=level-2;1<=j;--j)parentsString+=", ctx_"+j;parents="["+parentsString+"]"}else parents="["+ctx+"]";var dynamicHelper=void 0;if(0===block.helperName.indexOf("[")&&(block.helperName=getCompileVar(block.helperName.replace(/[[\]]/g,""),ctx,data),dynamicHelper=!0),dynamicHelper||block.helperName in Template7Helpers)compiledArguments=getCompiledArguments(block.contextName,ctx,data),resultString+="r += (Template7Helpers"+(dynamicHelper?"["+block.helperName+"]":"."+block.helperName)+").call("+ctx+", "+(compiledArguments&&compiledArguments+", ")+"{hash:"+JSON.stringify(block.hash)+", data: "+data+" || {}, fn: "+getCompileFn(block,depth+1)+", inverse: "+getCompileInverse(block,depth+1)+", root: root, parents: "+parents+"});";else{if(0<block.contextName.length)throw new Error('Template7: Missing helper: "'+block.helperName+'"');variable=getCompileVar(block.helperName,ctx,data),resultString+="if ("+variable+") {",resultString+="if (isArray("+variable+")) {",resultString+="r += (Template7Helpers.each).call("+ctx+", "+variable+", {hash:"+JSON.stringify(block.hash)+", data: "+data+" || {}, fn: "+getCompileFn(block,depth+1)+", inverse: "+getCompileInverse(block,depth+1)+", root: root, parents: "+parents+"});",resultString+="}else {",resultString+="r += (Template7Helpers.with).call("+ctx+", "+variable+", {hash:"+JSON.stringify(block.hash)+", data: "+data+" || {}, fn: "+getCompileFn(block,depth+1)+", inverse: "+getCompileInverse(block,depth+1)+", root: root, parents: "+parents+"});",resultString+="}}"}}}}return resultString+="\nreturn r;})",1===depth?(t.compiled=eval(resultString),t.compiled):resultString},staticAccessors.options.get=function(){return Template7Options},staticAccessors.partials.get=function(){return Template7Partials},staticAccessors.helpers.get=function(){return Template7Helpers},Object.defineProperties(Template7Class,staticAccessors),Template7.registerHelper=function(e,t){Template7Class.helpers[e]=t},Template7.unregisterHelper=function(e){Template7Class.helpers[e]=void 0,delete Template7Class.helpers[e]},Template7.registerPartial=function(e,t){Template7Class.partials[e]={template:t}},Template7.unregisterPartial=function(e){Template7Class.partials[e]&&(Template7Class.partials[e]=void 0,delete Template7Class.partials[e])},Template7.compile=function(e,t){return new Template7Class(e,t).compile()},Template7.options=Template7Class.options,Template7.helpers=Template7Class.helpers,Template7.partials=Template7Class.partials,Template7.registerHelper("dateFormat",function(e,t){const a=["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"],r=["Januar","Februar","MÃ¤rz","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],i=new Date(e),s=t.split(""),n={d:("0"+i.getDate()).slice(-2),D:a[i.getDay()].substring(0,2),j:i.getDate(),l:a[i.getDay()],w:i.getDay(),F:r[i.getMonth()],m:("0"+(i.getMonth()+1)).slice(-2),M:r[i.getMonth()].substring(0,3),n:i.getMonth()+1,Y:i.getFullYear(),G:i.getHours(),H:("0"+i.getHours()).slice(-2),i:("0"+i.getMinutes()).slice(-2),s:("0"+i.getSeconds()).slice(-2)};return s.map(e=>n[e]||e).join("")}),Template7})(),Bineos.prototype.placementFunctions={shuffle:e=>{e.data.productLoop.sort((e,t)=>Math.random()-.5)},limit:(e,t)=>{e.data.productLoop.splice(t)}};